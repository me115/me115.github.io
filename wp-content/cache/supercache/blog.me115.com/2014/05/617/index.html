<link rel="stylesheet" href="http://files.cnblogs.com/xguo/prettify.css" />
<link rel="stylesheet" href="http://files.cnblogs.com/xguo/github.css"/>
<script src="http://blogcc.u.qiniudn.com/wp-content/themes/zbench/jquery.js" type="text/javascript"></script> 
<script src="http://files.cnblogs.com/xguo/google-code-prettify.js"></script>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Linux命令工具基础03 文本处理大CC | 大CC</title>
	<link rel="stylesheet" type="text/css" media="all" href="http://blogcc.u.qiniudn.com/wp-content/themes/zbench/style.css" />
	<link rel="pingback" href="http://blog.me115.com/xmlrpc.php" />
	<link rel="alternate" type="application/rss+xml" title="大CC &raquo; Feed" href="http://blog.me115.com/feed" />
<link rel="alternate" type="application/rss+xml" title="大CC &raquo; 评论 Feed" href="http://blog.me115.com/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="大CC &raquo; Linux命令工具基础03 文本处理 评论 Feed" href="http://blog.me115.com/2014/05/617/feed" />
<script type="text/javascript">
var duoshuoQuery = {"short_name":"me115","sso":{"login":"http:\/\/blog.me115.com\/wp-login.php?action=duoshuo_login","logout":"http:\/\/blog.me115.com\/wp-login.php?action=logout&_wpnonce=830f012da7"},"theme":"default","stylePatch":"wordpress\/zBench"};
duoshuoQuery.sso.login += '&redirect_to=' + encodeURIComponent(window.location.href);
duoshuoQuery.sso.logout += '&redirect_to=' + encodeURIComponent(window.location.href);
</script>
<script type="text/javascript" src="http://static.duoshuo.com/embed.js" charset="UTF-8" async="async"></script>
<script type='text/javascript' src='http://blogcc.u.qiniudn.com/wp-includes/js/comment-reply.min.js?ver=3.5'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.me115.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.me115.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Linux命令工具基础02 文件及目录管理' href='http://blog.me115.com/2014/05/614' />
<link rel='next' title='Linux命令工具基础04 磁盘管理' href='http://blog.me115.com/2014/05/619' />
<meta name="generator" content="WordPress 3.5" />
<link rel='shortlink' href='http://blog.me115.com/?p=617' />

<!-- All in One SEO Pack 1.6.15.3 by Michael Torbert of Semper Fi Web Design[629,682] -->
<link rel="canonical" href="http://blog.me115.com/2014/05/617" />
<!-- /all in one seo pack -->
</head>
<body class="single single-post postid-617 single-format-standard">
<div id="nav">
	<div id="menus">
		<ul><li><a href="http://blog.me115.com/">首页</a></li></ul>
		<ul id="menu-linux-2" class="menu"><li id="menu-item-566" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-566"><a href="http://blog.me115.com/category/linux%e5%b7%a5%e5%85%b7%e7%ae%b1">Linux工具箱</a></li>
<li id="menu-item-493" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-493"><a href="http://blog.me115.com/category/cc%e4%b9%a6%e8%af%84">书评和笔记</a>
<ul class="sub-menu">
	<li id="menu-item-495" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-495"><a href="http://blog.me115.com/category/%e8%af%bb%e4%b9%a6%e7%ac%94%e8%ae%b0">读书笔记</a></li>
	<li id="menu-item-494" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-494"><a href="http://blog.me115.com/category/cc%e8%af%84%e7%bd%91">CC评网</a></li>
</ul>
</li>
<li id="menu-item-560" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-560"><a href="http://blog.me115.com/%e9%98%85%e8%af%bb%e8%ae%a1%e5%88%92">阅读计划</a></li>
<li id="menu-item-461" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-461"><a href="http://blog.me115.com/%e5%85%b3%e4%ba%8e%e6%9c%a8%e4%b9%a6%e6%9e%b6">关于木书架</a></li>
<li id="menu-item-462" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-462"><a href="http://blog.me115.com/sample-page">关于我</a></li>
</ul>	</div>
	<div id="search">
		<form id="searchform" method="get" action="http://blog.me115.com/">
<input type="text" value="站内搜索" onfocus="if (this.value == '站内搜索') {this.value = '';}" onblur="if (this.value == '') {this.value = '站内搜索';}" size="35" maxlength="50" name="s" id="s" />
<input type="submit" id="searchsubmit" value="搜索" />
</form>	</div>
</div>
<div id="wrapper">
	<div id="header">		<h1><a href="http://blog.me115.com/">大CC</a></h1>
		<h2>关注 Nosql/架构/时间管理/阅读分享</h2>
		<div class="clear"></div>
			</div>
<div id="content">
		<div class="post-617 post type-post status-publish format-standard hentry category-linuxunix category-linux post-single" id="post-617"><!-- post div -->
		<h2 class="title">Linux命令工具基础03 文本处理</h2>
		<div class="post-info-top">
			<span class="post-info-date">
				作者: <a href="http://blog.me115.com/author/me115wp" title="查看 大CC 的所有文章" rel="author">大CC</a>
				日期:				2014 年 5 月 27 日							</span>
						<span class="addcomment"><a href="#respond"  rel="nofollow" title="发表评论？">发表评论</a><span class="ds-thread-count" data-thread-key="617" data-replace="1"> (0)</span></span>
			<span class="gotocomments"><a href="#comments"  rel="nofollow" title="查看评论？">查看评论</a></span>
					</div>
		<div class="clear"></div>
		<div class="entry">
			<h1 id="linux-03-">Linux命令工具基础03 文本处理</h1>

<p>本节将介绍Linux下使用Shell处理文本时最常用的工具：   <br />find、grep、xargs、sort、uniq、tr、cut、paste、wc、sed、awk；    <br />提供的例子和参数都是常用的；    <br />我对shell脚本使用的原则是命令单行书写，尽量不要超过2行；    <br />如果有更为复杂的任务需求，还是考虑python吧；</p>

<h2 id="find-">find 文件查找</h2>

<ul>   <li>     <p>查找txt和pdf文件</p>      <pre><code>  find . ( -name &quot;*.txt&quot; -o -name &quot;*.pdf&quot; ) -print</code></pre>
  </li>

  <li>
    <p>正则方式查找.txt和pdf</p>

    <pre><code>  find . -regex  &quot;.*(.txt|.pdf)$&quot;</code></pre>

    <p>-iregex： 忽略大小写的正则</p>
  </li>

  <li>
    <p>否定参数
      <br />查找所有非txt文本</p>

    <pre><code>   find . ! -name &quot;*.txt&quot; -print</code></pre>
  </li>

  <li>
    <p>指定搜索深度
      <br />打印出当前目录的文件（深度为1）</p>

    <pre><code>  find . -maxdepth 1 -type f  </code></pre>
  </li>
</ul>

<h3 id="-">定制搜索</h3>

<ul>
  <li>
    <p>按类型搜索：</p>

    <pre><code>  find . -type d -print  //只列出所有目录</code></pre>

    <p>-type f 文件 / l 符号链接</p>
  </li>

  <li>
    <p>按时间搜索：
      <br />-atime 访问时间 (单位是天，分钟单位则是-amin，以下类似）

      <br />-mtime 修改时间 （内容被修改）

      <br />-ctime 变化时间 （元数据或权限变化）

      <br />最近7天被访问过的所有文件：</p>

    <pre><code>  find . -atime 7 -type f -print</code></pre>
  </li>

  <li>
    <p>按大小搜索：
      <br />w字 k M G

      <br />寻找大于2k的文件</p>

    <pre><code>  find . -type f -size +2k</code></pre>

    <p>按权限查找：</p>

    <pre><code>  find . -type f -perm 644 -print //找具有可执行权限的所有文件</code></pre>

    <p>按用户查找：</p>

    <pre><code>  find . -type f -user weber -print// 找用户weber所拥有的文件</code></pre>
  </li>
</ul>

<h3 id="-">找到后的后续动作</h3>

<ul>
  <li>
    <p>删除：
      <br />删除当前目录下所有的swp文件：</p>

    <pre><code>  find . -type f -name &quot;*.swp&quot; -delete</code></pre>
  </li>

  <li>
    <p>执行动作（强大的exec）</p>

    <pre><code>  find . -type f -user root -exec chown weber {} ; //将当前目录下的所有权变更为weber</code></pre>

    <p>注：{}是一个特殊的字符串，对于每一个匹配的文件，{}会被替换成相应的文件名；
      <br />eg：将找到的文件全都copy到另一个目录：</p>

    <pre><code>  find . -type f -mtime +10 -name &quot;*.txt&quot; -exec cp {} OLD ;</code></pre>
  </li>

  <li>
    <p>结合多个命令
      <br />tips: 如果需要后续执行多个命令，可以将多个命令写成一个脚本。然后 -exec 调用时执行脚本即可；</p>

    <pre><code>  -exec ./commands.sh {} ;</code></pre>
  </li>
</ul>

<h3 id="-print-">-print的定界符</h3>

<p>默认使用&#8217;n'作为文件的定界符；
  <br />-print0 使用&#8217; '作为文件的定界符，这样就可以搜索包含空格的文件；</p>

<h2 id="grep-">grep 文本搜索</h2>

<p>grep match_patten file // 默认访问匹配行</p>

<ul>
  <li>
    <p>常用参数
      <br />-o 只输出匹配的文本行 <strong>VS </strong>-v 只输出没有匹配的文本行

      <br />-c 统计文件中包含文本的次数</p>

    <pre><code>  grep -c &quot;text&quot; filename</code></pre>

    <p>-n 打印匹配的行号
      <br />-i 搜索时忽略大小写

      <br />-l 只打印文件名</p>
  </li>

  <li>
    <p>在多级目录中对文本递归搜索(程序员搜代码的最爱）：</p>

    <pre><code>  grep &quot;class&quot; . -R -n</code></pre>
  </li>

  <li>匹配多个模式
    <pre><code>  grep -e &quot;class&quot; -e &quot;vitural&quot; file</code></pre>
  </li>

  <li>grep输出以 作为结尾符的文件名：（-z）
    <pre><code>  grep &quot;test&quot; file* -lZ| xargs -0 rm</code></pre>
  </li>
</ul>

<h2 id="xargs-">xargs 命令行参数转换</h2>

<p>xargs 能够将输入数据转化为特定命令的命令行参数；这样，可以配合很多命令来组合使用。比如grep，比如find；</p>

<ul>
  <li>
    <p>将多行输出转化为单行输出
      <br />cat file.txt| xargs

      <br />n 是多行文本间的定界符</p>
  </li>

  <li>
    <p>将单行转化为多行输出
      <br />cat single.txt | xargs -n 3

      <br />-n：指定每行显示的字段数</p>
  </li>
</ul>

<h3 id="xargs-">xargs参数说明</h3>

<p>-d 定义定界符 （默认为空格 多行的定界符为 n）
  <br />-n 指定输出为多行

  <br />-I {} 指定替换字符串，这个字符串在xargs扩展时会被替换掉,用于待执行的命令需要多个参数时

  <br />eg：</p>

<pre><code>cat file.txt | xargs -I {} ./command.sh -p {} -1</code></pre>

<p>-0：指定 为输入定界符
  <br />eg：统计程序行数</p>

<pre><code>find source_dir/ -type f -name &quot;*.cpp&quot; -print0 |xargs -0 wc -l</code></pre>

<h2 id="sort-">sort 排序</h2>

<p>字段说明：
  <br />-n 按数字进行排序 VS -d 按字典序进行排序

  <br />-r 逆序排序

  <br />-k N 指定按第N列排序

  <br />eg：</p>

<pre><code>sort -nrk 1 data.txt
sort -bd data // 忽略像空格之类的前导空白字符</code></pre>

<h2 id="uniq-">uniq 消除重复行</h2>

<ul>
  <li>消除重复行
    <pre><code>  sort unsort.txt | uniq </code></pre>
  </li>

  <li>统计各行在文件中出现的次数
    <pre><code>  sort unsort.txt | uniq -c</code></pre>
  </li>

  <li>找出重复行
    <pre><code>  sort unsort.txt | uniq -d</code></pre>
可指定每行中需要比较的重复内容：-s 开始位置 -w 比较字符数 </li>
</ul>

<h2 id="-tr-">用tr进行转换</h2>

<ul>
  <li>
    <p>通用用法</p>

    <pre><code>  echo 12345 | tr '0-9' '9876543210' //加解密转换，替换对应字符
  cat text| tr 't' ' '  //制表符转空格</code></pre>
  </li>

  <li>
    <p>tr删除字符</p>

    <pre><code>  cat file | tr -d '0-9' // 删除所有数字</code></pre>

    <p>-c 求补集</p>

    <pre><code>  cat file | tr -c '0-9' //获取文件中所有数字
  cat file | tr -d -c '0-9 n'  //删除非数字数据</code></pre>
  </li>

  <li>
    <p>tr压缩字符
      <br />tr -s 压缩文本中出现的重复字符；最常用于压缩多余的空格</p>

    <pre><code>  cat file | tr -s ' '</code></pre>
  </li>

  <li>
    <p>字符类
      <br />tr中可用各种字符类：

      <br />alnum：字母和数字

      <br />alpha：字母

      <br />digit：数字

      <br />space：空白字符

      <br />lower：小写

      <br />upper：大写

      <br />cntrl：控制（非可打印）字符

      <br />print：可打印字符

      <br />使用方法：tr [:class:] [:class:]</p>

    <pre><code>  eg: tr '[:lower:]' '[:upper:]'</code></pre>
  </li>
</ul>

<h2 id="cut-">cut 按列切分文本</h2>

<ul>
  <li>截取文件的第2列和第4列：
    <pre><code>  cut -f2,4 filename</code></pre>
  </li>

  <li>去文件除第3列的所有列：
    <pre><code>  cut -f3 --complement filename</code></pre>
  </li>

  <li>-d 指定定界符：
    <pre><code>  cat -f2 -d&quot;;&quot; filename</code></pre>
  </li>

  <li>cut 取的范围
    <br />N- 第N个字段到结尾

    <br />-M 第1个字段为M

    <br />N-M N到M个字段 </li>

  <li>cut 取的单位
    <br />-b 以字节为单位

    <br />-c 以字符为单位

    <br />-f 以字段为单位（使用定界符） </li>

  <li>eg:
    <pre><code>  cut -c1-5 file //打印第一到5个字符
  cut -c-2 file  //打印前2个字符</code></pre>
  </li>
</ul>

<h2 id="paste-">paste 按列拼接文本</h2>

<p>将两个文本按列拼接到一起;</p>

<pre><code>cat file1
1
2

cat file2
colin
book

paste file1 file2
1 colin
2 book</code></pre>

<p>默认的定界符是制表符，可以用-d指明定界符
  <br />paste file1 file2 -d &quot;,&quot;

  <br />1,colin

  <br />2,book</p>

<h2 id="wc-">wc 统计行和字符的工具</h2>

<p>wc -l file // 统计行数
  <br />wc -w file // 统计单词数

  <br />wc -c file // 统计字符数</p>

<h2 id="sed-">sed 文本替换利器</h2>

<ul>
  <li>首处替换
    <pre><code>  seg 's/text/replace_text/' file   //替换每一行的第一处匹配的text</code></pre>
  </li>

  <li>
    <p>全局替换</p>

    <pre><code>   seg 's/text/replace_text/g' file</code></pre>

    <p>默认替换后，输出替换后的内容，如果需要直接替换原文件,使用-i：</p>

    <pre><code>  seg -i 's/text/repalce_text/g' file</code></pre>
  </li>

  <li>
    <p>移除空白行：</p>

    <pre><code>  sed '/^$/d' file</code></pre>
  </li>

  <li>
    <p>变量转换
      <br />已匹配的字符串通过标记&amp;来引用.</p>

    <pre><code>echo this is en example | seg 's/w+/[&amp;]/g'
$&gt;[this]  [is] [en] [example]</code></pre>
  </li>

  <li>
    <p>子串匹配标记
      <br />第一个匹配的括号内容使用标记 1 来引用</p>

    <pre><code>  sed 's/hello([0-9])/1/'</code></pre>
  </li>

  <li>
    <p>双引号求值
      <br />sed通常用单引号来引用；也可使用双引号，使用双引号后，双引号会对表达式求值：</p>

    <pre><code>  sed 's/$var/HLLOE/' </code></pre>

    <p>当使用双引号时，我们可以在sed样式和替换字符串中指定变量；</p>

    <pre><code>eg:
p=patten
r=replaced
echo &quot;line con a patten&quot; | sed &quot;s/$p/$r/g&quot;
$&gt;line con a replaced</code></pre>
  </li>

  <li>
    <p>其它示例
      <br />字符串插入字符：将文本中每行内容（PEKSHA） 转换为 PEK/SHA</p>

    <pre><code>  sed 's/^.{3}/&amp;//g' file</code></pre>
  </li>
</ul>

<h2 id="awk-">awk 数据流处理工具</h2>

<ul>
  <li>
    <p>awk脚本结构
      <br />awk &#8216; BEGIN{ statements } statements2 END{ statements } &#8216;</p>
  </li>

  <li>
    <p>工作方式
      <br />1.执行begin中语句块；

      <br />2.从文件或stdin中读入一行，然后执行statements2，重复这个过程，直到文件全部被读取完毕；

      <br />3.执行end语句块；</p>
  </li>
</ul>

<h3 id="print-">print 打印当前行</h3>

<ul>
  <li>
    <p>使用不带参数的print时，会打印当前行;</p>

    <pre><code>  echo -e &quot;line1nline2&quot; | awk 'BEGIN{print &quot;start&quot;} {print } END{ print &quot;End&quot; }' </code></pre>
  </li>

  <li>
    <p>print 以逗号分割时，参数以空格定界;</p>

    <pre><code>echo | awk ' {var1 = &quot;v1&quot; ; var2 = &quot;V2&quot;; var3=&quot;v3&quot;; 
print var1, var2 , var3; }'
$&gt;v1 V2 v3</code></pre>
  </li>

  <li>使用-拼接符的方式（&quot;&quot;作为拼接符）;
    <pre><code>echo | awk ' {var1 = &quot;v1&quot; ; var2 = &quot;V2&quot;; var3=&quot;v3&quot;; 
print var1&quot;-&quot;var2&quot;-&quot;var3; }'
$&gt;v1-V2-v3</code></pre>
  </li>
</ul>

<h3 id="-nr-nf-0-1-2">特殊变量： NR NF $0 $1 $2</h3>

<p>NR:表示记录数量，在执行过程中对应当前行号；
  <br />NF:表示字段数量，在执行过程总对应当前行的字段数；

  <br />$0:这个变量包含执行过程中当前行的文本内容；

  <br />$1:第一个字段的文本内容；

  <br />$2:第二个字段的文本内容；</p>

<pre><code>echo -e &quot;line1 f2 f3n line2 n line 3&quot; | awk '{print NR&quot;:&quot;$0&quot;-&quot;$1&quot;-&quot;$2}'</code></pre>

<ul>
  <li>打印每一行的第二和第三个字段：
    <pre><code>  awk '{print $2, $3}' file</code></pre>
  </li>

  <li>
    <p>统计文件的行数：</p>

    <pre><code>  awk ' END {print NR}' file</code></pre>
  </li>

  <li>
    <p>累加每一行的第一个字段：</p>

    <pre><code>  echo -e &quot;1n 2n 3n 4n&quot; | awk 'BEGIN{num = 0 ;
  print &quot;begin&quot;;} {sum += $1;} END {print &quot;==&quot;; print sum }'</code></pre>
  </li>
</ul>

<h3 id="-">传递外部变量</h3>

<pre><code>var=1000
echo | awk '{print vara}' vara=$var #  输入来自stdin
awk '{print vara}' vara=$var file # 输入来自文件</code></pre>

<h3 id="-awk-">用样式对awk处理的行进行过滤</h3>

<p>awk &#8216;NR &lt; 5&#8242; #行号小于5
  <br />awk &#8216;NR==1,NR==4 {print}&#8217; file #行号等于1和4的打印出来

  <br />awk &#8216;/linux/&#8217; #包含linux文本的行（可以用正则表达式来指定，超级强大）

  <br />awk &#8216;!/linux/&#8217; #不包含linux文本的行</p>

<h3 id="-">设置定界符</h3>

<p>使用-F来设置定界符（默认为空格）
  <br />awk -F: &#8216;{print $NF}&#8217; /etc/passwd</p>

<h3 id="-">读取命令输出</h3>

<p>使用getline，将外部shell命令的输出读入到变量cmdout中；</p>

<pre><code>echo | awk '{&quot;grep root /etc/passwd&quot; | getline cmdout; print cmdout }' </code></pre>

<h3 id="-awk-">在awk中使用循环</h3>

<p>for(i=0;i&lt;10;i++){print $i;}
  <br />for(i in array){print array[i];}</p>

<p>eg:
  <br />以逆序的形式打印行：(tac命令的实现）</p>

<pre><code>seq 9| 
awk '{lifo[NR] = $0; lno=NR} 
END{ for(;lno&gt;-1;lno--){print lifo[lno];}
} '</code></pre>

<h3 id="awk-head-tail-">awk实现head、tail命令</h3>

<ul>
  <li>
    <p>head:</p>

    <pre><code>  awk 'NR&lt;=10{print}' filename</code></pre>
  </li>

  <li>
    <p>tail:</p>

    <pre><code>  awk '{buffer[NR%10] = $0;} END{for(i=0;i&lt;11;i++){ 
  print buffer[i %10]} } ' filename</code></pre>
  </li>
</ul>

<h3 id="-">打印指定列</h3>

<ul>
  <li>awk方式实现：
    <pre><code>  ls -lrt | awk '{print $6}'</code></pre>
  </li>

  <li>cut方式实现
    <pre><code>  ls -lrt | cut -f6</code></pre>
  </li>
</ul>

<h3 id="-">打印指定文本区域</h3>

<ul>
  <li>确定行号
    <pre><code>  seq 100| awk 'NR==4,NR==6{print}'</code></pre>
  </li>

  <li>确定文本
    <br />打印处于start_pattern 和end_pattern之间的文本；

    <pre><code>  awk '/start_pattern/, /end_pattern/' filename</code></pre>
eg:

    <pre><code>seq 100 | awk '/13/,/15/'
cat /etc/passwd| awk '/mai.*mail/,/news.*news/'</code></pre>
  </li>
</ul>

<h3 id="awk-">awk常用内建函数</h3>

<p>index(string,search_string):返回search_string在string中出现的位置
  <br />sub(regex,replacement_str,string):将正则匹配到的第一处内容替换为replacement_str;

  <br />match(regex,string):检查正则表达式是否能够匹配字符串；

  <br />length(string)：返回字符串长度</p>

<pre><code>echo | awk '{&quot;grep root /etc/passwd&quot; | getline cmdout; print length(cmdout) }' </code></pre>

<p>printf 类似c语言中的printf，对输出进行格式化
  <br />eg：</p>

<pre><code>seq 10 | awk '{printf &quot;-&gt;%4sn&quot;, $1}'</code></pre>

<h2 id="-">迭代文件中的行、单词和字符</h2>

<h3 id="1-">1. 迭代文件中的每一行</h3>

<ul>
  <li>
    <p>while 循环法</p>

    <pre><code>while read line;
do
echo $line;
done &lt; file.txt
改成子shell:
cat file.txt | (while read line;do echo $line;done)</code></pre>
  </li>

  <li>
    <p>awk法：
      <br />cat file.txt| awk &#8216;{print}&#8217;</p>
  </li>
</ul>

<h3 id="2-">2.迭代一行中的每一个单词</h3>

<pre><code>for word in $line;
do 
echo $word;
done</code></pre>

<h3 id="3-">3. 迭代每一个字符</h3>

<p>${string:start_pos:num_of_chars}：从字符串中提取一个字符；(bash文本切片）
  <br />${#word}:返回变量word的长度</p>

<pre><code>for((i=0;i&lt;${#word};i++))
do
echo ${word:i:1);
done</code></pre>

<div class="ujian-hook"></div><div style='clear:both;'></div>

 
		<script type="text/javascript">
		var ujian_config = {
			'num':5,
			'showType':2,
			'bgColor':"",
			'mouseoverColor':"#E6F3DE",
			'textColor':"#333333",
			'hoverTextColor':"#333333",
			'borderColor':"#dddddd",
			'picSize':96,
			'target':1,
			'textHeight':60,
			'defaultPic':"",
			'itemTitle':"您可能喜欢："
		}</script>
	<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js"></script>					</div><!-- END entry -->
		<div class="add-info">
					</div>
		<div class="post-info-bottom">
			<span class="post-info-category"><a href="http://blog.me115.com/category/linuxunix" title="查看 Linux&amp;Unix 中的全部文章" rel="category tag">Linux&amp;Unix</a>, <a href="http://blog.me115.com/category/linux%e5%b7%a5%e5%85%b7%e7%ae%b1" title="查看 Linux工具箱 中的全部文章" rel="category tag">Linux工具箱</a></span><span class="post-info-tags"></span>
		</div>
		<div id="nav-below">
			<div class="nav-previous"><a href="http://blog.me115.com/2014/05/614" rel="prev"><span class="meta-nav">&larr;</span> Linux命令工具基础02 文件及目录管理</a></div>
			<div class="nav-next"><a href="http://blog.me115.com/2014/05/619" rel="next">Linux命令工具基础04 磁盘管理 <span class="meta-nav">&rarr;</span></a></div>
		</div><!-- #nav-below -->					
	</div><!-- END post -->
	<a name="comments"></a>

<div class="ds-thread" data-thread-key="617" data-author-key="1" data-title="Linux命令工具基础03 文本处理" data-url="http://blog.me115.com/2014/05/617"></div>

<script type="text/javascript">
	if (typeof DUOSHUO !== 'undefined')
		DUOSHUO.EmbedThread('.ds-thread');
</script>
	<div id="ds-ssr">

		
            <ol id="commentlist">
                            </ol>

		            
    </div></div><!--content-->
<div id="sidebar-border">
	<div id="rss_border">
		<div class="rss_border">
			<div id="rss_wrap">
				<div class="rss_wrap">
										<a class="rss rss_text" href="http://blog.me115.com/feed" rel="bookmark" title="RSS 订阅">RSS 订阅</a>
																													</div>
			</div>
		</div>
	</div>
	<div id="sidebar">

<div id="search-2" class="widget widget_search"><form id="searchform" method="get" action="http://blog.me115.com/">
<input type="text" value="站内搜索" onfocus="if (this.value == '站内搜索') {this.value = '';}" onblur="if (this.value == '') {this.value = '站内搜索';}" size="35" maxlength="50" name="s" id="s" />
<input type="submit" id="searchsubmit" value="搜索" />
</form></div>		<div id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widgettitle">近期文章</h3>		<ul>
					<li>
				<a href="http://blog.me115.com/2015/12/891" title="单线程你别阻塞，Redis时延问题分析及应对">单线程你别阻塞，Redis时延问题分析及应对</a>
						</li>
					<li>
				<a href="http://blog.me115.com/2015/11/886" title="负载均衡的几种常用方案">负载均衡的几种常用方案</a>
						</li>
					<li>
				<a href="http://blog.me115.com/2015/11/884" title="Redis哈希表的实现要点">Redis哈希表的实现要点</a>
						</li>
					<li>
				<a href="http://blog.me115.com/2015/10/875" title="多线程和多进程模型的选用">多线程和多进程模型的选用</a>
						</li>
					<li>
				<a href="http://blog.me115.com/2015/10/872" title="异步和非阻塞">异步和非阻塞</a>
						</li>
				</ul>
		</div><div id="text-3" class="widget widget_text"><h3 class="widgettitle">广告</h3>			<div class="textwidget">本站使用digitalocean提供的VPS；<br/>
访问速度可以通过<a href="http://blog.me115.com" target="_blank">大CC博客</a> 和<a href="http://www.me115.com" target="_blank">木书架网</a>体验；<br/>
其中我的博客为直连digitalocean，
而木书架网站采用了第三方CDN加速（安全宝）<br/><br/>

从以下链接点击进入注册digitalocean，您将获取10美元(可免费使用2个月的VPS):<br/>

<B><a href="https://www.digitalocean.com/?refcode=ee9c5a992d6f" target="_blank">DigitalOcean</a></B></div>
		</div><div id="ds-recent-comments-2" class="widget ds-widget-recent-comments"><h3 class="widgettitle">近期评论</h3><ul class="ds-recent-comments" data-num-items="5" data-show-avatars="0" data-show-time="0" data-show-title="0" data-show-admin="0" data-avatar-size="30" data-excerpt-length="70"></ul></div><script>
if (typeof DUOSHUO !== 'undefined')
	DUOSHUO.RecentComments && DUOSHUO.RecentComments('.ds-recent-comments');
</script><div id="archives-3" class="widget widget_archive"><h3 class="widgettitle">文章归档</h3>		<ul>
			<li><a href='http://blog.me115.com/date/2015/12' title='2015 年十二月'>2015 年十二月</a></li>
	<li><a href='http://blog.me115.com/date/2015/11' title='2015 年十一月'>2015 年十一月</a></li>
	<li><a href='http://blog.me115.com/date/2015/10' title='2015 年十月'>2015 年十月</a></li>
	<li><a href='http://blog.me115.com/date/2015/09' title='2015 年九月'>2015 年九月</a></li>
	<li><a href='http://blog.me115.com/date/2015/08' title='2015 年八月'>2015 年八月</a></li>
	<li><a href='http://blog.me115.com/date/2015/06' title='2015 年六月'>2015 年六月</a></li>
	<li><a href='http://blog.me115.com/date/2015/05' title='2015 年五月'>2015 年五月</a></li>
	<li><a href='http://blog.me115.com/date/2015/04' title='2015 年四月'>2015 年四月</a></li>
	<li><a href='http://blog.me115.com/date/2015/03' title='2015 年三月'>2015 年三月</a></li>
	<li><a href='http://blog.me115.com/date/2015/02' title='2015 年二月'>2015 年二月</a></li>
	<li><a href='http://blog.me115.com/date/2015/01' title='2015 年一月'>2015 年一月</a></li>
	<li><a href='http://blog.me115.com/date/2014/11' title='2014 年十一月'>2014 年十一月</a></li>
	<li><a href='http://blog.me115.com/date/2014/10' title='2014 年十月'>2014 年十月</a></li>
	<li><a href='http://blog.me115.com/date/2014/09' title='2014 年九月'>2014 年九月</a></li>
	<li><a href='http://blog.me115.com/date/2014/08' title='2014 年八月'>2014 年八月</a></li>
	<li><a href='http://blog.me115.com/date/2014/07' title='2014 年七月'>2014 年七月</a></li>
	<li><a href='http://blog.me115.com/date/2014/06' title='2014 年六月'>2014 年六月</a></li>
	<li><a href='http://blog.me115.com/date/2014/05' title='2014 年五月'>2014 年五月</a></li>
	<li><a href='http://blog.me115.com/date/2014/04' title='2014 年四月'>2014 年四月</a></li>
	<li><a href='http://blog.me115.com/date/2014/02' title='2014 年二月'>2014 年二月</a></li>
	<li><a href='http://blog.me115.com/date/2013/12' title='2013 年十二月'>2013 年十二月</a></li>
	<li><a href='http://blog.me115.com/date/2013/11' title='2013 年十一月'>2013 年十一月</a></li>
	<li><a href='http://blog.me115.com/date/2013/10' title='2013 年十月'>2013 年十月</a></li>
	<li><a href='http://blog.me115.com/date/2013/09' title='2013 年九月'>2013 年九月</a></li>
	<li><a href='http://blog.me115.com/date/2013/06' title='2013 年六月'>2013 年六月</a></li>
	<li><a href='http://blog.me115.com/date/2013/04' title='2013 年四月'>2013 年四月</a></li>
	<li><a href='http://blog.me115.com/date/2013/03' title='2013 年三月'>2013 年三月</a></li>
	<li><a href='http://blog.me115.com/date/2013/01' title='2013 年一月'>2013 年一月</a></li>
	<li><a href='http://blog.me115.com/date/2012/12' title='2012 年十二月'>2012 年十二月</a></li>
	<li><a href='http://blog.me115.com/date/2012/10' title='2012 年十月'>2012 年十月</a></li>
	<li><a href='http://blog.me115.com/date/2012/09' title='2012 年九月'>2012 年九月</a></li>
	<li><a href='http://blog.me115.com/date/2012/08' title='2012 年八月'>2012 年八月</a></li>
	<li><a href='http://blog.me115.com/date/2012/05' title='2012 年五月'>2012 年五月</a></li>
	<li><a href='http://blog.me115.com/date/2012/04' title='2012 年四月'>2012 年四月</a></li>
	<li><a href='http://blog.me115.com/date/2012/02' title='2012 年二月'>2012 年二月</a></li>
	<li><a href='http://blog.me115.com/date/2011/11' title='2011 年十一月'>2011 年十一月</a></li>
	<li><a href='http://blog.me115.com/date/2011/10' title='2011 年十月'>2011 年十月</a></li>
	<li><a href='http://blog.me115.com/date/2011/09' title='2011 年九月'>2011 年九月</a></li>
	<li><a href='http://blog.me115.com/date/2011/07' title='2011 年七月'>2011 年七月</a></li>
	<li><a href='http://blog.me115.com/date/2011/06' title='2011 年六月'>2011 年六月</a></li>
	<li><a href='http://blog.me115.com/date/2011/05' title='2011 年五月'>2011 年五月</a></li>
	<li><a href='http://blog.me115.com/date/2011/04' title='2011 年四月'>2011 年四月</a></li>
	<li><a href='http://blog.me115.com/date/2011/03' title='2011 年三月'>2011 年三月</a></li>
	<li><a href='http://blog.me115.com/date/2011/02' title='2011 年二月'>2011 年二月</a></li>
	<li><a href='http://blog.me115.com/date/2011/01' title='2011 年一月'>2011 年一月</a></li>
	<li><a href='http://blog.me115.com/date/2010/12' title='2010 年十二月'>2010 年十二月</a></li>
	<li><a href='http://blog.me115.com/date/2010/11' title='2010 年十一月'>2010 年十一月</a></li>
	<li><a href='http://blog.me115.com/date/2010/10' title='2010 年十月'>2010 年十月</a></li>
		</ul>
</div><div id="categories-2" class="widget widget_categories"><h3 class="widgettitle">分类目录</h3>		<ul>
	<li class="cat-item cat-item-2"><a href="http://blog.me115.com/category/beautiful-life" title="查看 Beautiful Life 下的所有文章">Beautiful Life</a>
</li>
	<li class="cat-item cat-item-92"><a href="http://blog.me115.com/category/berkeley-db" title="查看 Berkeley DB 下的所有文章">Berkeley DB</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://blog.me115.com/category/%e7%a8%8b%e5%ba%8f%e5%91%98/c%e7%bc%96%e7%a8%8b" title="查看 C++编程 下的所有文章">C++编程</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://blog.me115.com/category/cc%e4%b9%a6%e8%af%84" title="查看 CC书评 下的所有文章">CC书评</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://blog.me115.com/category/cc%e8%af%84%e7%bd%91" title="查看 CC评网 下的所有文章">CC评网</a>
</li>
	<li class="cat-item cat-item-6"><a href="http://blog.me115.com/category/linuxunix" title="查看 Linux&amp;Unix 下的所有文章">Linux&amp;Unix</a>
</li>
	<li class="cat-item cat-item-90"><a href="http://blog.me115.com/category/linux%e5%b7%a5%e5%85%b7%e7%ae%b1" title="查看 Linux工具箱 下的所有文章">Linux工具箱</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://blog.me115.com/category/python" title="查看 Python 下的所有文章">Python</a>
</li>
	<li class="cat-item cat-item-93"><a href="http://blog.me115.com/category/redis" title="查看 Redis 下的所有文章">Redis</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://blog.me115.com/category/web%e5%bc%80%e5%8f%91" title="查看 WEB开发 下的所有文章">WEB开发</a>
</li>
	<li class="cat-item cat-item-127"><a href="http://blog.me115.com/category/%e5%84%92%e9%87%8a%e9%81%93" title="查看 儒释道 下的所有文章">儒释道</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://blog.me115.com/category/%e5%85%ac%e5%8f%b8%e7%ae%a1%e7%90%86" title="查看 公司管理 下的所有文章">公司管理</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://blog.me115.com/category/%e5%b9%b6%e8%a1%8c%e8%ae%a1%e7%ae%97" title="查看 并行计算 下的所有文章">并行计算</a>
</li>
	<li class="cat-item cat-item-58"><a href="http://blog.me115.com/category/%e6%91%84%e5%bd%b1" title="查看 摄影 下的所有文章">摄影</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://blog.me115.com/category/%e6%97%b6%e9%97%b4%e7%ae%a1%e7%90%86" title="查看 时间管理 下的所有文章">时间管理</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://blog.me115.com/category/uncategorized" title="查看 未分类 下的所有文章">未分类</a>
</li>
	<li class="cat-item cat-item-113"><a href="http://blog.me115.com/category/%e6%9e%b6%e6%9e%84" title="查看 架构 下的所有文章">架构</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://blog.me115.com/category/%e7%a4%be%e4%bc%9a%e6%9d%82%e8%b0%88" title="查看 社会杂谈 下的所有文章">社会杂谈</a>
</li>
	<li class="cat-item cat-item-74"><a href="http://blog.me115.com/category/%e7%a8%8b%e5%ba%8f%e5%91%98" title="查看 程序员 下的所有文章">程序员</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://blog.me115.com/category/%e7%bb%8f%e6%b5%8e%e8%a7%82%e7%82%b9" title="查看 经济观点 下的所有文章">经济观点</a>
</li>
	<li class="cat-item cat-item-132"><a href="http://blog.me115.com/category/%e8%a7%82%e7%82%b9%e4%b8%8e%e6%84%9f%e6%83%b3" title="查看 观点与感想 下的所有文章">观点与感想</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://blog.me115.com/category/%e8%af%bb%e4%b9%a6%e7%ac%94%e8%ae%b0" title="查看 读书笔记 下的所有文章">读书笔记</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://blog.me115.com/category/%e9%a1%b9%e7%9b%ae%e7%ae%a1%e7%90%86" title="查看 项目管理 下的所有文章">项目管理</a>
</li>
		</ul>
</div><div id="meta-2" class="widget widget_meta"><h3 class="widgettitle">功能</h3>			<ul>
						<li><a href="http://blog.me115.com/wp-login.php">登录</a></li>
			<li><a href="http://blog.me115.com/feed" title="使用 RSS 2.0 订阅本站点内容">文章 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://blog.me115.com/comments/feed" title="使用 RSS 订阅本站点的所有文章的近期评论">评论 <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://cn.wordpress.org/" title="基于 WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>
						</ul>
</div><div id="nav_menu-2" class="widget widget_nav_menu"><div class="menu-%e5%8f%8b%e6%83%85%e9%93%be%e6%8e%a5-container"><ul id="menu-%e5%8f%8b%e6%83%85%e9%93%be%e6%8e%a5" class="menu"><li id="menu-item-304" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-304"><a title="pongba,关注C++，心理学" href="http://mindhacks.cn/archives/">刘未鹏</a></li>
<li id="menu-item-540" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-540"><a title="游走世界，精彩人生" href="http://www.purplexsu.net/">purplexsu</a></li>
<li id="menu-item-348" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-348"><a href="http://coolshell.cn/">酷壳</a></li>
<li id="menu-item-322" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-322"><a href="http://www.cppfans.org/">C++爱好者博客</a></li>
<li id="menu-item-321" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-321"><a href="http://www.cnblogs.com/archy_yu/">Archy Yu</a></li>
<li id="menu-item-305" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-305"><a href="http://www.shenlongbin.com/">申龙斌的程序人生</a></li>
<li id="menu-item-324" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-324"><a href="http://www.rrgod.com">Eddy Blog</a></li>
<li id="menu-item-340" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-340"><a href="http://www.wangyuxiong.com/">点滴–挖掘技术细节</a></li>
<li id="menu-item-341" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-341"><a href="http://www.hiadmin.org/">Smart Testing</a></li>
</ul></div></div><div id="text-2" class="widget widget_text"><h3 class="widgettitle">统计</h3>			<div class="textwidget"><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_4893206'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/stat.php%3Fid%3D4893206%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script></div>
		</div>

	</div><!-- end: #sidebar -->
</div><!-- end: #sidebar-border --></div><!--wrapper-->
<div class="clear"></div>
<div id="footer">
	<div id="footer-inside">
		<p>
			版权所有 &copy; 2015 大CC			| 站点由 <a href="http://zww.me">zBench</a> 和 <a href="http://wordpress.org/">WordPress</a> 驱动		</p>
		<span id="back-to-top">&uarr; <a href="#" rel="nofollow" title="Back to top">回到顶部</a></span>
	</div>
</div><!--footer-->
</body>
</html>
<script  type="text/javascript">
$(function(){
    $("pre").addClass("prettyprint");
    $(".entry").addClass("markdown-body");
    prettyPrint();
    var dirbef = '<div id="navCategory" class="dir"><h3>内容目录</h3><ul>', dirend = '</ul><//div>', dircontent = '';
$('.entry h2').each( function(i,e){ dircontent += '<li><a href="#h2' + i + '">' + $(e).text() + "</a></li>"; $(this).attr('id', 'h2' + i);  } );$( dirbef + dircontent + dirend ).insertBefore( '.entry' );});
</script>


<!-- Dynamic page generated in 0.130 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2015-12-11 13:43:21 -->

<!-- super cache -->